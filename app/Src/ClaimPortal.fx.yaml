ClaimPortal As screen:
    OnVisible: |-
        =If(
            _refresh,
            //  Sync    
            Set(_sync, true);
            Clear(ClaimCollection);
            Collect(ClaimCollection, FindAllClaims.Run());
        
            //  Check occurence if needed
            If(
                _doLookup,
                ForAll(
                    ClaimCollection,
                    If(
                        ThisRecord.number = _lookupName,
                        Notify("Could not delete party " & Char(34) & _lookupName & Char(34) & "!", NotificationType.Error);
                        Collect(CountCollection, ThisRecord)
                    )
                )
            );
        
            If(
                And(_doLookup, CountRows(CountCollection) = 0),
                Notify("Successfully deleted party " & Char(34) & _lookupName & Char(34) & "!", NotificationType.Success)
            );
        
            //  Clear variables/collections
            Clear(CountCollection);
            Set(_sync, false);
            Set(_doLookup, false);
            Set(_lookupName, "");
            Set(_eClaimNumberSearch, "");
            Set(_eClaimDateSearch, Today());
            Set(_refresh, false);
            true,
            true
        );

    ProductPortalTitle_3 As label:
        Align: =Align.Center
        Color: =RGBA(151, 0, 0, 1)
        FontWeight: =FontWeight.Bold
        Height: =75
        Size: =25
        Text: ="Claim Portal"
        Width: =970
        ZIndex: =1

    "Products_3 As gallery.'BrowseLayout_Vertical_TwoTextOneImageVariant_ver4.0'":
        Height: =673
        Items: =ClaimCollection
        Layout: =Layout.Vertical
        OnSelect: =Collect(Collection2, Products_3.AllItems)
        TemplatePadding: =0
        TemplateSize: =114
        Width: =950
        X: =20
        Y: =75
        ZIndex: =2

        eProdNameLabel_4 As label:
            OnSelect: =Select(Parent)
            Text: |-
                ="Number: " & ThisItem.number
            Width: =400
            X: =8
            ZIndex: =1

        eProdDepartmentLabel_4 As label:
            OnSelect: =Select(Parent)
            Text: |-
                ="Created: " & ThisItem.created
            Width: =400
            X: =8
            Y: =40
            ZIndex: =2

        ProductSeparator_3 As rectangle:
            Fill: =RGBA(116, 116, 116, 1)
            Height: =1
            OnSelect: =Select(Parent)
            Width: =950
            Y: =110
            ZIndex: =3

        RemoveProductIcon_3 As icon.Trash:
            Color: =RGBA(116, 116, 116, 1)
            Height: =80
            Icon: =Icon.Trash
            OnSelect: |-
                =//  Set basic variables
                Set(_lookupName, ThisItem.number);
                Set(_sync, true);
                
                //  Delete product
                DeleteClaimByID.Run(UrlParser.Run(ThisItem.uuid).uuid);
                
                //  Sync collection
                Clear(ClaimCollection);
                Collect(ClaimCollection, FindAllClaims.Run());
                
                //  Check synced collection for occurrence of the item
                ForAll(
                    ClaimCollection,
                    If(
                        ThisRecord.number = _lookupName,
                        Notify("Could not delete party " & Char(34) & _lookupName & Char(34) & "!", NotificationType.Error);
                        Collect(CountCollection, ThisRecord)
                    )
                );
                
                If(
                    CountRows(CountCollection) = 0,
                    Notify("Successfully deleted party " & Char(34) & _lookupName & Char(34) & "!", NotificationType.Success)
                );
                
                //  Clear collections/variables
                Clear(CountCollection);
                Set(_lookupName, "");
                Set(_sync, false);
            PaddingBottom: =20
            PaddingTop: =20
            Width: =80
            X: =710
            Y: =15
            ZIndex: =4

        EditProductIcon_3 As icon.Edit:
            Color: =RGBA(116, 116, 116, 1)
            Height: =80
            Icon: =Icon.Edit
            OnSelect: |-
                =Set(_current_claim_uuid, UrlParser.Run(ThisItem.uuid).uuid);
                Navigate(ClaimEditor, None, 
                    {
                        number: ThisItem.number,
                        created: ThisItem.created,
                        contracts: ThisItem.contracts,
                        uuid: _current_claim_uuid
                    }
                );
            PaddingBottom: =20
            PaddingTop: =20
            Width: =80
            X: =790
            Y: =15
            ZIndex: =5

        SpecProductIcon_3 As icon.NextArrow:
            Color: =RGBA(116, 116, 116, 1)
            Height: =80
            Icon: =Icon.NextArrow
            OnSelect: |-
                =Set(_current_claim_uuid, UrlParser.Run(ThisItem.uuid).uuid);
                Clear(ClaimSpecCollection);
                Collect(ClaimSpecCollection, FindContractsOfClaimById.Run(_current_claim_uuid));
                Navigate(ClaimSpecification, None,
                    {
                        number: ThisItem.number,
                        created: ThisItem.created,
                        contracts: ThisItem.contracts,
                        uuid: _current_claim_uuid,
                        true_contracts: ClaimSpecCollection
                    }
                );
            PaddingBottom: =20
            PaddingTop: =20
            Width: =80
            X: =870
            Y: =15
            ZIndex: =6

    eProdOptFilter_3 As label:
        Height: =50
        Text: ="Optional Filters"
        Width: =300
        X: =990
        Y: =75
        ZIndex: =3

    eProdNameFilter_3 As label:
        Height: =50
        Text: ="ID"
        Width: =115
        X: =990
        Y: =126
        ZIndex: =4

    eClaimIDSearchInp As text:
        BorderColor: =RGBA(151, 0, 0, 1)
        Default: =_eClaimNumberSearch
        Height: =35
        HintText: ="ID"
        HoverBorderColor: =RGBA(151, 0, 0, 1)
        HoverFill: =RGBA(238, 204, 204, 1)
        Reset: =resetClaimName
        Width: =211
        X: =1105
        Y: =133
        ZIndex: =5

    eProdDepFilter_5 As label:
        Height: =50
        Text: ="Created"
        Width: =115
        X: =990
        Y: =176
        ZIndex: =6

    eProdSyncIcon_3 As icon.Sync:
        Color: =RGBA(116, 116, 116, 1)
        Height: =80
        Icon: =Icon.Sync
        OnSelect: |-
            =Set(_sync, true);
            Clear(ClaimCollection);
            Collect(ClaimCollection, FindAllClaims.Run());
            Set(_sync, false)
        PaddingBottom: =20
        PaddingTop: =20
        Width: =80
        X: =1266
        Y: =668
        ZIndex: =8

    eProdSync_3 As label:
        Align: =Align.Right
        Text: ="Syncing..."
        Visible: =_sync
        X: =1122
        Y: =688
        ZIndex: =9

    eProdToHome_5 As icon.BackArrow:
        Color: =RGBA(116, 116, 116, 1)
        Height: =75
        Icon: =Icon.BackArrow
        OnSelect: =Back()
        PaddingBottom: =16
        PaddingTop: =16
        Width: =75
        X: =1215
        ZIndex: =10

    Icon12_3 As icon.Add:
        Color: =RGBA(116, 116, 116, 1)
        Height: =80
        Icon: =Icon.Add
        OnSelect: =Navigate(PartyCreator);
        PaddingBottom: =20
        PaddingTop: =20
        Width: =80
        X: =890
        ZIndex: =11

    eClaimDateSearchInp As datepicker:
        BorderColor: =RGBA(118, 0, 0, 1)
        DefaultDate: =_eClaimDateSearch
        IconBackground: =RGBA(118, 0, 0, 1)
        Reset: =resetClaimDate
        Width: =211
        X: =1105
        Y: =181
        ZIndex: =12

    Icon5_1 As icon.Home:
        Color: =RGBA(116, 116, 116, 1)
        Height: =75
        Icon: =Icon.Home
        OnSelect: =Navigate(EntitySelector);
        PaddingBottom: =16
        PaddingTop: =16
        Width: =75
        X: =1290
        ZIndex: =13

    Icon6_3 As icon.Search:
        Color: =RGBA(116, 116, 116, 1)
        Height: =30
        Icon: =Icon.Search
        OnSelect: |-
            =Set(_sync, true);
            Set(_searchDateInput, eClaimDateSearchInp.SelectedDate);
            Set(_searchDate, Year(_searchDateInput) & "-" & 
                    If(Len(Month(_searchDateInput)) = 1, "0" & Month(_searchDateInput), Month(_searchDateInput)) & "-" & 
                    If(Len(Day(_searchDateInput)) = 1, "0" & Day(_searchDateInput), Day(_searchDateInput)) & "T" & 
                    If(Len(Hour(_searchDateInput)) = 1, "0" & Hour(_searchDateInput), Hour(_searchDateInput)) & ":" & 
                    If(Len(Minute(_searchDateInput)) = 1, "0" & Minute(_searchDateInput), Minute(_searchDateInput)) & ":" & 
                    If(Len(Second(_searchDateInput)) = 1, "0" & Second(_searchDateInput), Second(_searchDateInput)) & "Z");
            Clear(ClaimCollection);
            Collect(ClaimCollection, SearchClaims.Run(
                _searchDate, 
                eClaimIDSearchInp.Text,
                eClaimNumberSearchInp.Text,
                eClaimHolderSearchInp.Text,
                "",
                eClaimBeneficiarySearchInp.Text,
                "",
                eClaimTypeSearchInp.Text,
                eClaimDepartmentSearchInp.Text
            ));
            Set(_sync, false);
        PaddingBottom: =2
        PaddingTop: =2
        Width: =30
        X: =1326
        Y: =476
        ZIndex: =14

    Icon7_8 As icon.Cancel:
        Color: =RGBA(116, 116, 116, 1)
        Height: =30
        Icon: =Icon.Cancel
        OnSelect: |-
            =UpdateContext({resetClaimName: !resetClaimName});
            UpdateContext({resetClaimName: !resetClaimName})
        PaddingBottom: =2
        PaddingTop: =2
        Width: =30
        X: =1326
        Y: =136
        ZIndex: =15

    Icon7_9 As icon.Cancel:
        Color: =RGBA(116, 116, 116, 1)
        Height: =30
        Icon: =Icon.Cancel
        OnSelect: |-
            =UpdateContext({resetClaimDate: !resetClaimDate});
            UpdateContext({resetClaimDate: !resetClaimDate})
        PaddingBottom: =2
        PaddingTop: =2
        Width: =30
        X: =1326
        Y: =185
        ZIndex: =16

    eProdNameFilter_4 As label:
        Height: =50
        Text: ="Number"
        Width: =115
        X: =990
        Y: =226
        ZIndex: =17

    eProdNameFilter_5 As label:
        Height: =50
        Text: ="Type"
        Width: =115
        X: =990
        Y: =276
        ZIndex: =18

    eProdNameFilter_6 As label:
        Height: =50
        Text: ="Holder"
        Width: =115
        X: =990
        Y: =376
        ZIndex: =19

    eProdNameFilter_7 As label:
        Height: =50
        Text: |-
            ="Beneficiary
            "
        Width: =115
        X: =990
        Y: =426
        ZIndex: =20

    eClaimNumberSearchInp As text:
        BorderColor: =RGBA(151, 0, 0, 1)
        Default: =_eClaimNumberSearch
        Height: =35
        HintText: ="Number"
        HoverBorderColor: =RGBA(151, 0, 0, 1)
        HoverFill: =RGBA(238, 204, 204, 1)
        Reset: =resetClaimNumber
        Width: =211
        X: =1105
        Y: =233
        ZIndex: =21

    eClaimTypeSearchInp As text:
        BorderColor: =RGBA(151, 0, 0, 1)
        Default: =_eClaimNumberSearch
        Height: =35
        HintText: ="Type"
        HoverBorderColor: =RGBA(151, 0, 0, 1)
        HoverFill: =RGBA(238, 204, 204, 1)
        Reset: =resetClaimType
        Width: =211
        X: =1105
        Y: =283
        ZIndex: =22

    eClaimHolderSearchInp As text:
        BorderColor: =RGBA(151, 0, 0, 1)
        Default: =_eClaimNumberSearch
        Height: =35
        HintText: ="Holder"
        HoverBorderColor: =RGBA(151, 0, 0, 1)
        HoverFill: =RGBA(238, 204, 204, 1)
        Reset: =resetClaimHolder
        Width: =211
        X: =1105
        Y: =383
        ZIndex: =23

    eClaimBeneficiarySearchInp As text:
        BorderColor: =RGBA(151, 0, 0, 1)
        Default: =_eClaimNumberSearch
        Height: =35
        HintText: ="Beneficiary"
        HoverBorderColor: =RGBA(151, 0, 0, 1)
        HoverFill: =RGBA(238, 204, 204, 1)
        Reset: =resetClaimBeneficiary
        Width: =211
        X: =1105
        Y: =433
        ZIndex: =24

    Icon7_10 As icon.Cancel:
        Color: =RGBA(116, 116, 116, 1)
        Height: =30
        Icon: =Icon.Cancel
        OnSelect: |-
            =UpdateContext({resetClaimNumber: !resetClaimNumber});
            UpdateContext({resetClaimNumber: !resetClaimNumber})
        PaddingBottom: =2
        PaddingTop: =2
        Width: =30
        X: =1326
        Y: =237
        ZIndex: =25

    Icon7_11 As icon.Cancel:
        Color: =RGBA(116, 116, 116, 1)
        Height: =30
        Icon: =Icon.Cancel
        OnSelect: |-
            =UpdateContext({resetClaimType: !resetClaimType});
            UpdateContext({resetClaimType: !resetClaimType})
        PaddingBottom: =2
        PaddingTop: =2
        Width: =30
        X: =1326
        Y: =289
        ZIndex: =26

    Icon7_12 As icon.Cancel:
        Color: =RGBA(116, 116, 116, 1)
        Height: =30
        Icon: =Icon.Cancel
        OnSelect: |-
            =UpdateContext({resetClaimHolder: !resetClaimHolder});
            UpdateContext({resetClaimHolder: !resetClaimHolder})
        PaddingBottom: =2
        PaddingTop: =2
        Width: =30
        X: =1326
        Y: =385
        ZIndex: =27

    Icon7_13 As icon.Cancel:
        Color: =RGBA(116, 116, 116, 1)
        Height: =30
        Icon: =Icon.Cancel
        OnSelect: |-
            =UpdateContext({resetClaimBeneficiary: !resetClaimBeneficiary});
            UpdateContext({resetClaimBeneficiary: !resetClaimBeneficiary})
        PaddingBottom: =2
        PaddingTop: =2
        Width: =30
        X: =1326
        Y: =436
        ZIndex: =28

    eProdNameFilter_8 As label:
        Height: =50
        Text: ="Department"
        Width: =115
        X: =990
        Y: =326
        ZIndex: =29

    eClaimDepartmentSearchInp As text:
        BorderColor: =RGBA(151, 0, 0, 1)
        Default: =_eClaimNumberSearch
        Height: =35
        HintText: ="Department"
        HoverBorderColor: =RGBA(151, 0, 0, 1)
        HoverFill: =RGBA(238, 204, 204, 1)
        Reset: =resetClaimDepartment
        Width: =211
        X: =1105
        Y: =333
        ZIndex: =30

    Icon7_14 As icon.Cancel:
        Color: =RGBA(116, 116, 116, 1)
        Height: =30
        Icon: =Icon.Cancel
        OnSelect: |-
            =UpdateContext({resetClaimDepartment: !resetClaimDepartment});
            UpdateContext({resetClaimDepartment: !resetClaimDepartment})
        PaddingBottom: =2
        PaddingTop: =2
        Width: =30
        X: =1326
        Y: =336
        ZIndex: =31

